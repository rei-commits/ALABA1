<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deferred Execution</title>
</head>

<body>
    <div id="result"></div>

    <script>
        const resultElement = document.getElementById("result")

        // func to see if a number is prime
        function isPrime(num) {
            if (num <= 1) return false
            for (let i = 2; i <= Math.sqrt(num); i++) {
                if (num % i === 0) return false
            }
            return true
        }

        // write a func that adds prime numbers up to n to the html element
        function addPrimeNumbers(num, current = 2) {
            if (current > num) {
                if (isPrime(current)) {
                    //use settimeout to defer adding each prime num
                    setTimeout(() => {
                        resultElement.innerHTML += `${current}, `;
                    }, 0);

                }
                //recursively call the func for next number
                setTimeout(() => {
                    addPrimeNumbers(num, current + 1)
                }, 0)
            } else {
                //use settimeout to defer showing the alert until all nums are rendered
                setTimeout(() => {
                    alert("Calculation is done")
                }, 0)
            }
        }
        //run the function with n equals to 10,000
        addPrimeNumbers(10000)
    </script>
</body>

</html>